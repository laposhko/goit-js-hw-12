{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst AUTH_KEY = '42495238-f221500a84206b905dda8310d';\nconst fetchBtn = document.querySelector('.fetch-btn');\n\nlet link;\nexport async function requestImages(query, amount, page) {\n  fetchBtn.style.display = 'none';\n  link = `${BASE_URL}?key=${AUTH_KEY}&q=${query}&orientation=horizontal&image_type=photo&safesearch=true&page=${page}&per_page=${amount}`;\n  let data;\n  try {\n    data = await axios.get(link).then(response => response.data);\n    if (data.total == 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else if (page * amount >= data.totalHits) {\n      throw new Error(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n    fetchBtn.style.display = 'block';\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      backgroundColor: '#EF4040',\n      theme: 'dark',\n      position: 'topRight',\n      maxWidth: '400px',\n    });\n  } finally {\n    return data.hits;\n  }\n  // if (data.total == 0) {\n  //   iziToast.error({\n  //     title: 'Error',\n  //     message:\n  //       'Sorry, there are no images matching your search query. Please try again!',\n  //     backgroundColor: '#EF4040',\n  //     theme: 'dark',\n  //     position: 'topRight',\n  //     maxWidth: '400px',\n  //   });\n  //   return;\n  // } else if (page * amount >= data.totalHits) {\n  //   iziToast.error({\n  //     title: 'Error',\n  //     message: \"We're sorry, but you've reached the end of search results.\",\n  //     backgroundColor: '#EF4040',\n  //     theme: 'dark',\n  //     position: 'topRight',\n  //     maxWidth: '450px',\n  //   });\n  //   return data.hits;\n  // } else {\n  //   fetchBtn.style.display = 'block';\n  //   return data.hits;\n  // }\n}\n","const imagesList = document.querySelector('.images-list');\n\nexport function renderImages(images) {\n  const galleryContent = images\n    .map(\n      img => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${img.webformatURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${img.previewURL}\"\n      // data-source=\"${img.largeImageURL}\"\n      alt=\"${img.tags}\"\n    />\n      <ul class='statistic'>\n      <li>Likes:<br>${img.likes}</li>\n      <li>Views:<br>${img.views}</li>\n      <li>Comments:<br>${img.comments}</li>\n      <li>Downloads:<br>${img.downloads}</li>\n    </ul>\n  </a>\n\n</li>`\n    )\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', galleryContent);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nimport { requestImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nconst form = document.querySelector('.search-form');\nconst input = form.querySelector('input');\nconst content = document.querySelector('.content');\nconst fetchBtn = document.querySelector('.fetch-btn');\nconst imagesList = document.querySelector('.images-list');\n\nlet query;\nlet amount = 15;\nlet page = 1;\nlet lightbox;\n\nfunction showLoader() {\n  content.insertAdjacentHTML('beforeend', '<span class=\"loader\"></span>');\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.remove();\n}\nform.addEventListener('submit', async event => {\n  showLoader();\n  page = 1;\n  imagesList.innerHTML = '';\n  event.preventDefault();\n  query = input.value;\n  try {\n    const images = await requestImages(query, amount, page);\n    renderImages(images);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    page++;\n    hideLoader();\n    form.reset();\n    lightbox = new SimpleLightbox('.images-list a', {\n      overlayOpacity: 0.8,\n    });\n  }\n});\n\nfetchBtn.addEventListener('click', async event => {\n  showLoader();\n  try {\n    const images = await requestImages(query, amount, page);\n    renderImages(images);\n    page++;\n    const rect = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["BASE_URL","AUTH_KEY","fetchBtn","link","requestImages","query","amount","page","data","axios","response","error","iziToast","imagesList","renderImages","images","galleryContent","img","form","input","content","lightbox","showLoader","hideLoader","event","SimpleLightbox","rect"],"mappings":"owBAIA,MAAMA,EAAW,2BACXC,EAAW,qCACXC,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIC,EACG,eAAeC,EAAcC,EAAOC,EAAQC,EAAM,CACvDL,EAAS,MAAM,QAAU,OACzBC,EAAO,GAAGH,CAAQ,QAAQC,CAAQ,MAAMI,CAAK,iEAAiEE,CAAI,aAAaD,CAAM,GACrI,IAAIE,EACJ,GAAI,CAEF,GADAA,EAAO,MAAMC,EAAM,IAAIN,CAAI,EAAE,KAAKO,GAAYA,EAAS,IAAI,EACvDF,EAAK,OAAS,EAChB,MAAM,IAAI,MACR,0EACR,EACW,GAAID,EAAOD,GAAUE,EAAK,UAC/B,MAAM,IAAI,MACR,4DACR,EAEIN,EAAS,MAAM,QAAU,OAC1B,OAAQS,EAAO,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,QACf,gBAAiB,UACjB,MAAO,OACP,SAAU,WACV,SAAU,OAChB,CAAK,CACL,QAAY,CACR,OAAOH,EAAK,IACb,CA0BH,CC9DA,MAAMK,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAiBD,EACpB,IACCE,GAAO;AAAA,oCACuBA,EAAI,YAAY;AAAA;AAAA;AAAA,aAGvCA,EAAI,UAAU;AAAA,wBACHA,EAAI,aAAa;AAAA,aAC5BA,EAAI,IAAI;AAAA;AAAA;AAAA,sBAGCA,EAAI,KAAK;AAAA,sBACTA,EAAI,KAAK;AAAA,yBACNA,EAAI,QAAQ;AAAA,0BACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,MAKlC,EACA,KAAK,EAAE,EACVJ,EAAW,mBAAmB,YAAaG,CAAc,CAC3D,CCpBA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQD,EAAK,cAAc,OAAO,EAClCE,EAAU,SAAS,cAAc,UAAU,EAC3ClB,EAAW,SAAS,cAAc,YAAY,EAC9CW,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIR,EACAC,EAAS,GACTC,EAAO,EACPc,EAEJ,SAASC,GAAa,CACpBF,EAAQ,mBAAmB,YAAa,8BAA8B,CACxE,CAEA,SAASG,GAAa,CACL,SAAS,cAAc,SAAS,EACxC,OAAM,CACf,CACAL,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAC7CF,IACAf,EAAO,EACPM,EAAW,UAAY,GACvBW,EAAM,eAAc,EACpBnB,EAAQc,EAAM,MACd,GAAI,CACF,MAAMJ,EAAS,MAAMX,EAAcC,EAAOC,EAAQC,CAAI,EACtDO,EAAaC,CAAM,CACpB,OAAQJ,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRJ,IACAgB,IACAL,EAAK,MAAK,EACVG,EAAW,IAAII,EAAe,iBAAkB,CAC9C,eAAgB,EACtB,CAAK,CACF,CACH,CAAC,EAEDvB,EAAS,iBAAiB,QAAS,MAAMsB,GAAS,CAChDF,IACA,GAAI,CACF,MAAMP,EAAS,MAAMX,EAAcC,EAAOC,EAAQC,CAAI,EACtDO,EAAaC,CAAM,EACnBR,IACA,MAAMmB,EAAO,SACV,cAAc,eAAe,EAC7B,wBAEH,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QAChB,CAAK,EACDL,EAAS,QAAO,CACjB,OAAQV,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRY,GACD,CACH,CAAC"}