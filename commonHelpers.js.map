{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst AUTH_KEY = '42495238-f221500a84206b905dda8310d';\nconst fetchBtn = document.querySelector('.fetch-btn');\n\nlet link;\nexport async function requestImages(query, amount, page) {\n  link = `${BASE_URL}?key=${AUTH_KEY}&q=${query}&page=${page}&per_page=${amount}`;\n  const data = await axios.get(link).then(response => response.data);\n  if (data.total == 0) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#EF4040',\n      theme: 'dark',\n      position: 'topRight',\n      maxWidth: '400px',\n    });\n  } else if (page * amount >= data.totalHits) {\n    iziToast.error({\n      title: 'Error',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: '#EF4040',\n      theme: 'dark',\n      position: 'topRight',\n      maxWidth: '450px',\n    });\n    fetchBtn.style.display = 'none';\n    return data.hits;\n  } else {\n    fetchBtn.style.display = 'block';\n    return data.hits;\n  }\n}\n","const imagesList = document.querySelector('.images-list');\n\nexport function renderImages(images) {\n  const galleryContent = images\n    .map(\n      img => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${img.webformatURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${img.previewURL}\"\n      // data-source=\"${img.largeImageURL}\"\n      alt=\"${img.tags}\"\n    />\n      <ul class='statistic'>\n      <li>Likes:<br>${img.likes}</li>\n      <li>Views:<br>${img.views}</li>\n      <li>Comments:<br>${img.comments}</li>\n      <li>Downloads:<br>${img.downloads}</li>\n    </ul>\n  </a>\n\n</li>`\n    )\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', galleryContent);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nimport { requestImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nconst form = document.querySelector('.search-form');\nconst input = form.querySelector('input');\nconst content = document.querySelector('.content');\nconst fetchBtn = document.querySelector('.fetch-btn');\nconst imagesList = document.querySelector('.images-list');\n\nlet query;\nlet amount = 15;\nlet page = 1;\nlet lightbox;\nform.addEventListener('submit', async event => {\n  page = 1;\n  imagesList.innerHTML = '';\n  event.preventDefault();\n  query = input.value;\n  content.insertAdjacentHTML('beforeend', '<span class=\"loader\"></span>');\n  const loader = document.querySelector('.loader');\n\n  try {\n    const images = await requestImages(query, amount, page);\n    renderImages(images);\n  } catch (error) {\n    console.log(error);\n  }\n  page++;\n  loader.remove();\n\n  input.value = '';\n  lightbox = new SimpleLightbox('.images-list a', {\n    overlayOpacity: 0.8,\n  });\n});\n\nfetchBtn.addEventListener('click', async event => {\n  content.insertAdjacentHTML('beforeend', '<span class=\"loader\"></span>');\n  const loader = document.querySelector('.loader');\n  try {\n    const images = await requestImages(query, amount, page);\n    renderImages(images);\n  } catch (error) {\n    console.log(error);\n  }\n  const rect = document.querySelector('.gallery-item').getBoundingClientRect();\n\n  window.scrollBy({\n    top: rect.height * 2,\n    behavior: 'smooth',\n  });\n\n  page++;\n  loader.remove();\n  lightbox.refresh();\n});\n"],"names":["BASE_URL","AUTH_KEY","fetchBtn","link","requestImages","query","amount","page","data","axios","response","iziToast","imagesList","renderImages","images","galleryContent","img","form","input","content","lightbox","event","loader","error","SimpleLightbox","rect"],"mappings":"owBAIA,MAAMA,EAAW,2BACXC,EAAW,qCACXC,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIC,EACG,eAAeC,EAAcC,EAAOC,EAAQC,EAAM,CACvDJ,EAAO,GAAGH,CAAQ,QAAQC,CAAQ,MAAMI,CAAK,SAASE,CAAI,aAAaD,CAAM,GAC7E,MAAME,EAAO,MAAMC,EAAM,IAAIN,CAAI,EAAE,KAAKO,GAAYA,EAAS,IAAI,EACjE,GAAIF,EAAK,OAAS,EAChBG,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,gBAAiB,UACjB,MAAO,OACP,SAAU,WACV,SAAU,OAChB,CAAK,MACI,QAAIJ,EAAOD,GAAUE,EAAK,WAC/BG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,gBAAiB,UACjB,MAAO,OACP,SAAU,WACV,SAAU,OAChB,CAAK,EACDT,EAAS,MAAM,QAAU,OAClBM,EAAK,OAEZN,EAAS,MAAM,QAAU,QAClBM,EAAK,KAEhB,CCrCA,MAAMI,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAiBD,EACpB,IACCE,GAAO;AAAA,oCACuBA,EAAI,YAAY;AAAA;AAAA;AAAA,aAGvCA,EAAI,UAAU;AAAA,wBACHA,EAAI,aAAa;AAAA,aAC5BA,EAAI,IAAI;AAAA;AAAA;AAAA,sBAGCA,EAAI,KAAK;AAAA,sBACTA,EAAI,KAAK;AAAA,yBACNA,EAAI,QAAQ;AAAA,0BACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,MAKlC,EACA,KAAK,EAAE,EACVJ,EAAW,mBAAmB,YAAaG,CAAc,CAC3D,CCpBA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQD,EAAK,cAAc,OAAO,EAClCE,EAAU,SAAS,cAAc,UAAU,EAC3CjB,EAAW,SAAS,cAAc,YAAY,EAC9CU,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIP,EACAC,EAAS,GACTC,EAAO,EACPa,EACJH,EAAK,iBAAiB,SAAU,MAAMI,GAAS,CAC7Cd,EAAO,EACPK,EAAW,UAAY,GACvBS,EAAM,eAAc,EACpBhB,EAAQa,EAAM,MACdC,EAAQ,mBAAmB,YAAa,8BAA8B,EACtE,MAAMG,EAAS,SAAS,cAAc,SAAS,EAE/C,GAAI,CACF,MAAMR,EAAS,MAAMV,EAAcC,EAAOC,EAAQC,CAAI,EACtDM,EAAaC,CAAM,CACpB,OAAQS,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDhB,IACAe,EAAO,OAAM,EAEbJ,EAAM,MAAQ,GACdE,EAAW,IAAII,EAAe,iBAAkB,CAC9C,eAAgB,EACpB,CAAG,CACH,CAAC,EAEDtB,EAAS,iBAAiB,QAAS,MAAMmB,GAAS,CAChDF,EAAQ,mBAAmB,YAAa,8BAA8B,EACtE,MAAMG,EAAS,SAAS,cAAc,SAAS,EAC/C,GAAI,CACF,MAAMR,EAAS,MAAMV,EAAcC,EAAOC,EAAQC,CAAI,EACtDM,EAAaC,CAAM,CACpB,OAAQS,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACD,MAAME,EAAO,SAAS,cAAc,eAAe,EAAE,sBAAqB,EAE1E,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QACd,CAAG,EAEDlB,IACAe,EAAO,OAAM,EACbF,EAAS,QAAO,CAClB,CAAC"}