{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst AUTH_KEY = '42495238-f221500a84206b905dda8310d';\nconst fetchBtn = document.querySelector('.fetch-btn');\n\nlet link;\nexport async function requestImages(query, amount, page) {\n  fetchBtn.style.display = 'none';\n  link = `${BASE_URL}?key=${AUTH_KEY}&q=${query}&orientation=horizontal&image_type=photo&safesearch=true&page=${page}&per_page=${amount}`;\n  const data = await axios.get(link).then(response => response.data);\n  if (data.total == 0) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#EF4040',\n      theme: 'dark',\n      position: 'topRight',\n      maxWidth: '400px',\n    });\n    return;\n  } else if (page * amount >= data.totalHits) {\n    iziToast.error({\n      title: 'Error',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: '#EF4040',\n      theme: 'dark',\n      position: 'topRight',\n      maxWidth: '450px',\n    });\n    return data.hits;\n  } else {\n    fetchBtn.style.display = 'block';\n    return data.hits;\n  }\n}\n","const imagesList = document.querySelector('.images-list');\n\nexport function renderImages(images) {\n  const galleryContent = images\n    .map(\n      img => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${img.webformatURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${img.previewURL}\"\n      // data-source=\"${img.largeImageURL}\"\n      alt=\"${img.tags}\"\n    />\n      <ul class='statistic'>\n      <li>Likes:<br>${img.likes}</li>\n      <li>Views:<br>${img.views}</li>\n      <li>Comments:<br>${img.comments}</li>\n      <li>Downloads:<br>${img.downloads}</li>\n    </ul>\n  </a>\n\n</li>`\n    )\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', galleryContent);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nimport { requestImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nconst form = document.querySelector('.search-form');\nconst input = form.querySelector('input');\nconst content = document.querySelector('.content');\nconst fetchBtn = document.querySelector('.fetch-btn');\nconst imagesList = document.querySelector('.images-list');\n\nlet query;\nlet amount = 15;\nlet page = 1;\nlet lightbox;\n\nfunction showLoader() {\n  content.insertAdjacentHTML('beforeend', '<span class=\"loader\"></span>');\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.remove();\n}\nform.addEventListener('submit', async event => {\n  showLoader();\n  page = 1;\n  imagesList.innerHTML = '';\n  event.preventDefault();\n  query = input.value;\n  try {\n    const images = await requestImages(query, amount, page);\n    renderImages(images);\n  } catch (error) {\n    console.log(error);\n  }\n  page++;\n  hideLoader();\n  input.value = '';\n  lightbox = new SimpleLightbox('.images-list a', {\n    overlayOpacity: 0.8,\n  });\n});\n\nfetchBtn.addEventListener('click', async event => {\n  showLoader();\n  try {\n    const images = await requestImages(query, amount, page);\n    renderImages(images);\n    page++;\n    const rect = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n});\n"],"names":["BASE_URL","AUTH_KEY","fetchBtn","link","requestImages","query","amount","page","data","axios","response","iziToast","imagesList","renderImages","images","galleryContent","img","form","input","content","lightbox","showLoader","hideLoader","event","error","SimpleLightbox","rect"],"mappings":"owBAIA,MAAMA,EAAW,2BACXC,EAAW,qCACXC,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIC,EACG,eAAeC,EAAcC,EAAOC,EAAQC,EAAM,CACvDL,EAAS,MAAM,QAAU,OACzBC,EAAO,GAAGH,CAAQ,QAAQC,CAAQ,MAAMI,CAAK,iEAAiEE,CAAI,aAAaD,CAAM,GACrI,MAAME,EAAO,MAAMC,EAAM,IAAIN,CAAI,EAAE,KAAKO,GAAYA,EAAS,IAAI,EACjE,GAAIF,EAAK,OAAS,EAAG,CACnBG,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,gBAAiB,UACjB,MAAO,OACP,SAAU,WACV,SAAU,OAChB,CAAK,EACD,MACD,KAAM,QAAIJ,EAAOD,GAAUE,EAAK,WAC/BG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,gBAAiB,UACjB,MAAO,OACP,SAAU,WACV,SAAU,OAChB,CAAK,EACMH,EAAK,OAEZN,EAAS,MAAM,QAAU,QAClBM,EAAK,KAEhB,CCtCA,MAAMI,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAiBD,EACpB,IACCE,GAAO;AAAA,oCACuBA,EAAI,YAAY;AAAA;AAAA;AAAA,aAGvCA,EAAI,UAAU;AAAA,wBACHA,EAAI,aAAa;AAAA,aAC5BA,EAAI,IAAI;AAAA;AAAA;AAAA,sBAGCA,EAAI,KAAK;AAAA,sBACTA,EAAI,KAAK;AAAA,yBACNA,EAAI,QAAQ;AAAA,0BACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,MAKlC,EACA,KAAK,EAAE,EACVJ,EAAW,mBAAmB,YAAaG,CAAc,CAC3D,CCpBA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQD,EAAK,cAAc,OAAO,EAClCE,EAAU,SAAS,cAAc,UAAU,EAC3CjB,EAAW,SAAS,cAAc,YAAY,EAC9CU,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIP,EACAC,EAAS,GACTC,EAAO,EACPa,EAEJ,SAASC,GAAa,CACpBF,EAAQ,mBAAmB,YAAa,8BAA8B,CACxE,CAEA,SAASG,GAAa,CACL,SAAS,cAAc,SAAS,EACxC,OAAM,CACf,CACAL,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAC7CF,IACAd,EAAO,EACPK,EAAW,UAAY,GACvBW,EAAM,eAAc,EACpBlB,EAAQa,EAAM,MACd,GAAI,CACF,MAAMJ,EAAS,MAAMV,EAAcC,EAAOC,EAAQC,CAAI,EACtDM,EAAaC,CAAM,CACpB,OAAQU,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDjB,IACAe,IACAJ,EAAM,MAAQ,GACdE,EAAW,IAAIK,EAAe,iBAAkB,CAC9C,eAAgB,EACpB,CAAG,CACH,CAAC,EAEDvB,EAAS,iBAAiB,QAAS,MAAMqB,GAAS,CAChDF,IACA,GAAI,CACF,MAAMP,EAAS,MAAMV,EAAcC,EAAOC,EAAQC,CAAI,EACtDM,EAAaC,CAAM,EACnBP,IACA,MAAMmB,EAAO,SACV,cAAc,eAAe,EAC7B,wBAEH,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QAChB,CAAK,EACDN,EAAS,QAAO,CACjB,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDF,GACF,CAAC"}